@page "/teacher"
@inject HttpClient Http
@inject NavigationManager NavigationManager
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@attribute [Authorize]

<div>
    <div class="row mb-5">
        <h1 class="mb-5">Your pending applications</h1>
        <NavLink href="/" class="top-btn bg-dark-grey white">
            Go to all theses
        </NavLink>
    </div>
    <div class="row">
    @foreach (var Apply in applies){
        <ApplicationComponent 
            Id="@Apply.Thesis.Id"
            title="@Apply.Thesis.Name"
            student="@Apply.Student.Name"
            excerpt="@Apply.Thesis.Description"
        />
    }
    </div>
</div>

@code {
    private ApplyDTO[]? applies;

    protected override async Task OnInitializedAsync()
    {

    var username = await localStorage.GetItemAsync<string>("user"); 
    var usernameInt = Int32.Parse(username);
    

    applies = await Http.GetFromJsonAsync<ApplyDTO[]>("api/Teacher/" + 1);
    }
}


<style>
    .bg-dark-grey {
        background: #6A736F;
    }
    .top-btn {
        padding: 15px 10px;
        text-align: center;
        color: #ffffff;
        font-weight: 500;
        text-decoration: none;
        border-radius: 5px;
    }
    .top-btn:hover {
        text-decoration: none;
        color: black;
    }
    .bg-grey {
        background: #F0F0F0;
        border-radius: 5px;
    }
    .excerpt {
        border-left: 2px solid black;
        padding: 10px;
    }
    .card {
        padding: 20px 30px;
    }
</style>

