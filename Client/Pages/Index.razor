@page "/"
@attribute [Authorize]
@inject HttpClient Http
@inject ThesisBank.Client.Service.ThesesService ThesesService

<div>
    <div class="row pb-4">
        <h1 class="mb-5">Find a thesis</h1>
        <NavLink href="/applications" class="top-btn bg-yellow shadow">
            Go to applied theses
        </NavLink>
    </div>
    <div class="row pt-2">
        <ThesisComponent Id="1" />
        <ThesisComponent Id="2" />
        <ThesisComponent Id="3" />
    </div>

    @foreach (var Thesis in thesisList) {
        <p>@Thesis.Name</p>
    }
    
</div>

@code {
    private Thesis[]? thesisList;

    protected async Task onInitializedAsync()
    {
        @* thesisList = await Http.GetFromJsonAsync<Thesis[]>("api/Thesis"); *@
        thesisList = await ThesesService.GetAllTheses();
    }
}